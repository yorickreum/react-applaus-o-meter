(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{206:function(e,t){},209:function(e,t,a){e.exports=a.p+"static/media/castle-gradient.1b3f0f42.svg"},235:function(e,t,a){e.exports=a(459)},451:function(e,t,a){},452:function(e,t,a){},459:function(e,t,a){"use strict";a.r(t);var n=a(15),r=a(16),o=a(23),i=a(21),c=a(22),l=a(1),s=a.n(l),m=a(18),u=a.n(m),p=a(192),d=a(60),v=a(39),h=a(20),f=a(56),b=a(43),y={dot:{textShadow:"0 0 8px #404040"}};var g=function(e){var t=e.isActive?"text-danger":"text-info";return s.a.createElement("span",{className:t,style:y.dot},"\u25c9")},E=a(10),w=a(24),O=a(128),C=a(194),I=a.n(C),k=a(121);var x=function(e,t,a){var n=a&&a.blacklist?a.blacklist:null,r=a&&a.whitelist?a.whitelist:null,o=a&&a.keyPrefix?a.keyPrefix:k.KEY_PREFIX,i=t.key;window.addEventListener("storage",function(t){if(t.key&&0===t.key.indexOf(o)){if(t.oldValue===t.newValue)return;var a=JSON.parse(t.newValue),c=Object.keys(a).reduce(function(e,t){return r&&-1===r.indexOf(t)?e:n&&-1!==n.indexOf(t)?e:(e[t]=JSON.parse(a[t]),e)},{});e.dispatch({key:i,payload:c,type:k.REHYDRATE})}},!1)};function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(a,!0).forEach(function(t){Object(h.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var j={errors:{byId:{}},control:{showBlank:!1},administration:{title:"Slammen im Schloss V",maxVol:1,duration:1e4},voting:{isInitialized:!1,activeCompetitor:null,competitors:{byId:{},allIds:[]},ratings:{}}},D=Object(w.c)({control:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j.control;switch((arguments.length>1?arguments[1]:void 0).type){case"SWITCH_BLANK":return S({},e,{showBlank:!e.showBlank});default:return e}},administration:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j.administration,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TITLE":return S({},e,{title:t.title});case"SET_DURATION":return S({},e,{duration:t.duration});case"SET_MAXVOL":return S({},e,{maxVol:t.maxVol});default:return e}},voting:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j.voting,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"INITIATE_VOLUMEMETER":return S({},t,{isInitialized:!0});case"ADD_COMPETITOR":return S({},t,{activeCompetitor:t.activeCompetitor===a.competitorKey?null:t.activeCompetitor,competitors:{byId:S({},t.competitors.byId,Object(h.a)({},a.competitorKey,{name:a.competitorKey,isVisible:!0,startedRecording:null,stoppedRecording:null,levels:[],timeLefts:[],measureDuration:null,timeLeft:null,interval:null})),allIds:[].concat(Object(b.a)(t.competitors.allIds),[a.competitorKey])}});case"DELETE_COMPETITOR":var n=S({},t.competitors.byId);return n[a.competitorKey]=void 0,Object.keys(n).forEach(function(e){return void 0===n[e]?delete n[e]:""}),(e=S({},t.ratings))[a.competitorKey]=void 0,Object.keys(e).forEach(function(t){return void 0===e[t]?delete e[t]:""}),S({},t,{competitors:S({},t.competitors,{byId:S({},n),allIds:Object(b.a)(t.competitors.allIds.filter(function(e){return e!==a.competitorKey}))}),ratings:e});case"START_RECORDING":return S({},t,{activeCompetitor:a.competitorKey,competitors:S({},t.competitors,{byId:S({},t.competitors.byId,Object(h.a)({},a.competitorKey,S({},t.competitors.byId[a.competitorKey],{interval:a.interval,measureDuration:a.measureDuration,startedRecording:a.startedRecording})))})});case"RESET_COMPETITOR ":return(e=S({},t.ratings))[a.competitorKey]=void 0,Object.keys(e).forEach(function(t){return void 0===e[t]?delete e[t]:""}),S({},t,{activeCompetitor:t.activeCompetitor===a.competitorKey?null:t.activeCompetitor,competitors:S({},t.competitors,{byId:S({},t.competitors.byId,Object(h.a)({},a.competitorKey,S({},t.competitors.byId[a.competitorKey],{isVisible:!0,startedRecording:null,stoppedRecording:null,levels:[],timeLefts:[],measureDuration:null,timeLeft:null,interval:null})))}),ratings:e});case"SHOW_COMPETITOR":return S({},t,{competitors:S({},t.competitors,{byId:S({},t.competitors.byId,Object(h.a)({},a.competitorKey,S({},t.competitors.byId[a.competitorKey],{isVisible:!0})))})});case"HIDE_COMPETITOR":return S({},t,{competitors:S({},t.competitors,{byId:S({},t.competitors.byId,Object(h.a)({},a.competitorKey,S({},t.competitors.byId[a.competitorKey],{isVisible:!1})))})});case"SAVE_VALUE":return S({},t,{competitors:S({},t.competitors,{byId:S({},t.competitors.byId,Object(h.a)({},a.competitorKey,S({},t.competitors.byId[a.competitorKey],{timeLeft:a.timeLeft,levels:[].concat(Object(b.a)(t.competitors.byId[a.competitorKey].levels),[a.value]),timeLefts:[].concat(Object(b.a)(t.competitors.byId[a.competitorKey].timeLefts),[a.timeLeft])})))})});case"STOP_RECORDING":return S({},t,{activeCompetitor:"",competitors:S({},t.competitors,{byId:S({},t.competitors.byId,Object(h.a)({},a.competitorKey,S({},t.competitors.byId[a.competitorKey],{timeLeft:0,stoppedRecording:a.stoppedRecording})))})});case"UPDATE_RATING":return S({},t,{ratings:S({},t.ratings,Object(h.a)({},a.competitorKey,a.rating))});default:return t}},errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j.errors,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_ERROR":return S({},e,{byId:S({},e.byId,Object(h.a)({},t.time.getTime(),{text:t.text,time:t.time}))});case"DISMISS_ALL_ERRORS":return S({},e,{byId:{}});case"DISMISS_ERROR":var a=S({},e.byId);return a[t.key]=void 0,Object.keys(a).forEach(function(e){return void 0===a[e]?delete a[e]:""}),S({},e,{byId:a});default:return e}}}),R=a(195),T={key:"root",storage:I.a},A=Object(O.a)(T,D),L=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||w.d,M=Object(w.e)(A,L(Object(w.a)(R.a)));x(M,T);var K=Object(O.b)(M);function V(){var e=M.getState().voting.competitors.allIds,t=null;return e[0]&&(t=e[0],e.forEach(function(e){F(e)>=F(t)&&(t=e)})),t&&0!==F(t)?t:null}function _(){var e=M.getState().voting.competitors.allIds,t=function(){var e=M.getState().voting.competitors.allIds,t=!0,a=!1,n=void 0;try{for(var r,o=e[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var i=r.value;if(P(i))return i}}catch(c){a=!0,n=c}finally{try{t||null==o.return||o.return()}finally{if(a)throw n}}return null}();return t&&(t=e[0],e.forEach(function(e){P(e)&&F(e)>=F(t)&&(t=e)})),t&&0!==F(t)?t:null}function P(e){var t=M.getState().voting.competitors.byId;return t[e]&&t[e].isVisible}function F(e){var t=M.getState().voting.competitors.byId[e];return 0===t.levels.length?0:B(t.levels.reduce(function(e,t){return e+t},0)/t.levels.length)}function B(e){var t=M.getState();if(e)return e/t.administration.maxVol}function U(e){var t=M.getState().voting.competitors.byId[e];return 0===t.levels.length?0:t.levels.reduce(function(e,t){return e+t},0)/t.levels.length}var H=function(){function e(){Object(n.a)(this,e)}return Object(r.a)(e,null,[{key:"initiate",value:function(t,a,n){var r=window.AudioContext||window.webkitAudioContext;window.audioContext=new r,window.processor=window.audioContext.createScriptProcessor(512),window.processor.onaudioprocess=e.volumeAudioProcess,window.processor.clipping=!1,window.processor.lastClip=0,window.processor.volume=0,window.processor.clipLevel=t||.98,window.processor.averaging=a||.95,window.processor.clipLag=n||750,console.log("AudioContext",window.audioContext),window.processor.connect(window.audioContext.destination),window.processor.checkClipping=function(){return!!window.processor.clipping&&(window.processor.lastClip+window.processor.clipLag<window.performance.now()&&(window.processor.clipping=!1),window.processor.clipping)},window.processor.shutdown=function(){e.disconnect(),window.processor.onaudioprocess=null};try{navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia,navigator.getUserMedia({audio:{mandatory:{googEchoCancellation:"false",googAutoGainControl:"false",googNoiseSuppression:"false",googHighpassFilter:"false"},optional:[]}},e.gotStream,e.didntGetStream)}catch(o){console.log("getUserMedia threw exception :"+o)}}},{key:"didntGetStream",value:function(){console.log("Stream generation failed.")}},{key:"gotStream",value:function(e){window.audioContext.createMediaStreamSource(e).connect(window.processor)}},{key:"volumeAudioProcess",value:function(e){for(var t,a=e.inputBuffer.getChannelData(0),n=0,r=0;r<a.length;r++)t=a[r],Math.abs(t)>=window.processor.clipLevel&&(window.processor.clipping=!0,window.processor.lastClip=window.performance.now()),n+=t*t;var o=Math.sqrt(n/a.length);window.processor.volume=Math.max(o,window.processor.volume*window.processor.averaging)}},{key:"getVolume",value:function(){return window.processor?window.processor.volume:null}}]),e}(),W=function(e){return{type:"SHOW_COMPETITOR",competitorKey:e}},z=function(e){return{type:"HIDE_COMPETITOR",competitorKey:e}},G=function(e,t,a,n,r){return{type:"START_RECORDING",competitorKey:e,interval:t,duration:a,startedRecording:n,isActive:r}},J=function(e){return function(t,a){var n=a(),r=n.voting.competitors.byId[e],o=r.interval,i=n.administration.duration-(Math.floor(Date.now())-r.startedRecording);if(i>0){var c=H.getVolume();null!==c?(t(Y(e,c,i)),t(Z(e,F(e)))):t(ee(new Date,"Volumemeter not initialized!"))}else{clearInterval(o);var l=Math.floor(Date.now());t(q(e,l))}}},X=function(e){return function(e,t){var a=t();Object.keys(a.voting.ratings).forEach(function(t){e(Z(t,F(t)))})}},Y=function(e,t,a){return{type:"SAVE_VALUE",competitorKey:e,value:t,timeLeft:a}},Z=function(e,t){return{type:"UPDATE_RATING",competitorKey:e,rating:t}},q=function(e,t){return{type:"STOP_RECORDING",competitorKey:e,stoppedRecording:t}},Q=function(e){return{type:"SET_DURATION",duration:e}},$=function(e){return{type:"SET_MAXVOL",maxVol:e}},ee=function(e,t){return{type:"ADD_ERROR",text:t,time:e}},te=function(e){return{type:"DISMISS_ERROR",key:e}},ae=function(){return H.initiate(),{type:"INITIATE_VOLUMEMETER"}},ne=a(35),re=a(67),oe=a.n(re),ie=a(463),ce=a(59),le=a.n(ce),se=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(i.a)(t).call(this,e))).handleShow=function(){a.setState({showModal:!a.state.showModal})},a.changeVisibility=function(){var e=a.props.competitor;a.props.competitors.byId[e].isVisible?a.props.dispatch(z(e)):a.props.dispatch(W(e))},a.state={showModal:!1},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=this.props.competitor,a=this.props.competitors.byId[t],n=F(t),r=[];return a.levels.forEach(function(e,t){r=[].concat(Object(b.a)(r),[{timeLeft:a.timeLefts[t],level:e}])}),s.a.createElement(s.a.Fragment,null,s.a.createElement("tr",{key:t,className:this.props.addClass},s.a.createElement("td",null,s.a.createElement(g,{isActive:t===this.props.activeCompetitor})),s.a.createElement("td",null,t),s.a.createElement("td",null,n?n.toFixed(4):"\u2013"),s.a.createElement("td",null,a.timeLefts&&a.timeLefts.length>0?(a.timeLeft/1e3).toFixed(3):"\u2013"),s.a.createElement("td",null,s.a.createElement(le.a,null,s.a.createElement(le.a.Check,{type:"checkbox",checked:a.isVisible,onChange:this.changeVisibility}))),s.a.createElement("td",null,this.props.ratings&&this.props.ratings.hasOwnProperty(t)?s.a.createElement(s.a.Fragment,null,s.a.createElement(oe.a,{variant:"info",onClick:this.handleShow},"Show Data"),s.a.createElement(ie.a,{show:this.state.showModal,size:"xl",onHide:this.handleShow,width:900,centered:!0},s.a.createElement(ie.a.Header,{closeButton:!0},s.a.createElement(ie.a.Title,{style:{color:"black"}},"Data of ",a.name)),s.a.createElement(ie.a.Body,null,s.a.createElement(ne.c,{width:"100%",height:400},s.a.createElement(ne.e,null,s.a.createElement(ne.a,{strokeDasharray:"1 1"}),s.a.createElement(ne.g,{dataKey:"timeLeft",name:"timeLeft"}),s.a.createElement(ne.h,{dataKey:"level",name:"level"}),s.a.createElement(ne.f,{cursor:{strokeDasharray:"3 3"}}),s.a.createElement(ne.d,{name:"Levels",data:r,fill:"#8884d8"}),s.a.createElement(ne.b,{y:U(t),stroke:"red"})))))):"\u2013"),s.a.createElement("td",null,s.a.createElement("input",{type:"button",className:"form-control btn btn-primary",value:"Start",onClick:function(){return e.props.dispatch(function(e){return function(t,a){t(ae());var n=a();if(n.voting.competitors.byId[e].timeLefts.length>0)t(ee(new Date,"Competitor was already started once."));else{var r=Math.floor(Date.now()),o=parseInt(r,10),i=0,c=setInterval(function(){i>15&&t(J(e)),i++},10);t(G(e,c,n.administration.duration,o,!0))}}}(t,e.props.measureDuration))}})),s.a.createElement("td",null,s.a.createElement("input",{type:"button",className:"form-control btn btn-warning",value:"Reset",onClick:function(){return e.props.dispatch(function(e){return clearInterval(M.getState().voting.competitors.byId[e].interval),{type:"RESET_COMPETITOR ",competitorKey:e}}(t))}})),s.a.createElement("td",null,s.a.createElement("input",{type:"button",className:"form-control btn btn-danger",value:"Delete",onClick:function(){return e.props.dispatch(function(e){return clearInterval(M.getState().voting.competitors.byId[e].interval),{type:"DELETE_COMPETITOR",competitorKey:e}}(t))}}))))}}]),t}(l.Component),me=Object(E.b)(function(e){return{competitors:e.voting.competitors,activeCompetitor:e.voting.activeCompetitor,ratings:e.voting.ratings,measureDuration:e.administration.duration}})(se),ue=function(e){function t(){return Object(n.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,"Leading competitor is displayed red.",s.a.createElement("table",{className:"table table-dark   table-striped table-hover"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("td",null,"Status"),s.a.createElement("td",null,"Name"),s.a.createElement("td",null,"Rating"),s.a.createElement("td",null,"Time left"),s.a.createElement("td",null,"Visibility"),s.a.createElement("td",null,"Data"),s.a.createElement("td",null,"Start"),s.a.createElement("td",null,"Reset"),s.a.createElement("td",null,"Delete"))),s.a.createElement("tbody",null,this.props.competitors.byId&&Object.keys(this.props.competitors.byId).length>0&&Object.keys(this.props.competitors.byId).map(function(e){return s.a.createElement(s.a.Fragment,{key:e},s.a.createElement(me,{competitor:e,addClass:e===V()?"text-danger":""}))}))))}}]),t}(l.Component),pe=Object(E.b)(function(e){return{competitors:e.voting.competitors}})(ue),de=a(206),ve=a.n(de),he=a(85),fe=a.n(he),be=new(function(){function e(){return Object(n.a)(this,e),e.instance||(this.reset(),e.instance=this),e.instance}return Object(r.a)(e,[{key:"reset",value:function(){this.competitors=[],this._duration=1e4,this.calibrationCompetitors=[],this.maxVol=1,this.stateCallbacks=[]}},{key:"addCompetitor",value:function(e){this.competitors.push(e)}},{key:"addCalibrationCompetitor",value:function(e){this.calibrationCompetitors.push(e)}},{key:"update",value:function(){this.stateCallbacks.forEach(function(e){e&&e()})}},{key:"isCompetitorNameAlreadyExists",value:function(e){var t=!1;return this.competitors.forEach(function(a){e===a.name&&(t=!0)}),t}},{key:"isCalibrationCompetitorNameAlreadyExists",value:function(e){var t=!1;return this.calibrationCompetitors.forEach(function(a){e===a.name&&(t=!0)}),t}},{key:"removeCompetitor",value:function(e){this.competitors.forEach(function(t,a,n){e===t&&n.splice(a,1)}),this.update()}},{key:"removeCalibrationCompetitor",value:function(e){this.calibrationCompetitors.forEach(function(t,a,n){e===t&&n.splice(a,1)}),this.update()}},{key:"getActiveCompetitor",value:function(){var e=null;return this.competitors.forEach(function(t){t.isActive&&(e=t)}),e}},{key:"getActiveCalibrationCompetitor",value:function(){var e=null;return this.calibrationCompetitors.forEach(function(t){t.isActive&&(e=t)}),e}},{key:"getLeader",value:function(){var e=null;return this.competitors[0]&&(e=this.competitors[0],this.competitors.forEach(function(t,a,n){t.rating>=e.rating&&(e=t)})),e&&0!==e.rating?e:null}},{key:"isCalibrating",value:function(){var e=!1;return this.calibrationCompetitors.forEach(function(t){t.isActive&&(e=!0)}),e}},{key:"dumpToLocalStorage",value:function(){localStorage.setItem("competition",JSON.stringify(this))}},{key:"getJsonDateUri",value:function(){var e=JSON.stringify(this,null,"\t");return"data:application/json;charset=utf-8,"+encodeURIComponent(e)}},{key:"reviveFromFileList",value:function(e){var t=e[0],a=new FileReader;a.onload=function(e){var t=JSON.parse(e.target.result);if(null!=t){var a=this.stateCallbacks;this.revive(t),this.dumpToLocalStorage(),this.stateCallbacks=a,this.update()}}.bind(this),a.readAsText(t)}},{key:"revive",value:function(e){var t=this;this.reset(),this._duration=e._duration,this.maxVol=e.maxVol,e.competitors.forEach(function(e){var a=new ve.a;a.revive(e),t.addCompetitor(a)}),e.calibrationCompetitors.forEach(function(e){var a=new fe.a;a.revive(e),t.addCalibrationCompetitor(a)}),this.update()}},{key:"duration",get:function(){return this._duration},set:function(e){this._duration=parseInt(e,10)}}]),e}()),ye=a(89),ge=a.n(ye),Ee=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(i.a)(t).call(this,e))).setShow=function(e){a.setState({show:e})},a.dismiss=function(){a.props.dispatch(te(a.props.errorKey)),a.setShow(!1)},a.state={show:!0},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=this.props.time&&new Date(this.props.time);return s.a.createElement(ge.a,{onClose:function(){return e.dismiss()},show:this.state.show,autohide:!1,className:"bg-danger"},s.a.createElement(ge.a.Header,null,s.a.createElement("strong",{className:"mr-auto"},"Error"),s.a.createElement("small",null,t&&t.toLocaleDateString("de-DE")+" "+t.toLocaleTimeString("de-DE"))),s.a.createElement(ge.a.Body,null,this.props.text&&this.props.text))}}]),t}(l.Component),we=Object(E.b)()(Ee);var Oe=Object(E.b)(function(e){return{errors:e.errors}})(function(e){return s.a.createElement("div",{"aria-live":"polite","aria-atomic":"true",style:{position:"absolute",top:"2em",right:"2em",minWidth:"500px",minHeight:"200px"}},s.a.createElement("div",{style:{position:"absolute",top:"0",right:"0"}},Object.keys(e.errors.byId).map(function(t){return s.a.createElement(we,{key:t,errorKey:t,text:e.errors.byId[t].text,time:e.errors.byId[t].time})})))}),Ce=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(i.a)(t).call(this,e))).setDuration=function(){a.props.dispatch(Q(1e3*a.state.durationInput))},a.setMaxvol=function(){a.props.dispatch($(parseFloat(a.state.maxVolInput.toString().replace(",",".")))),a.props.dispatch(X())},a.state={addCompetitorInput:"",addCalibrationCompetitorInput:"Calibration 1",durationInput:e.duration?e.duration/1e3:10,maxVolInput:e.maxVol},a.addCompetitor=a.addCompetitor.bind(Object(f.a)(a)),a.addCalibrationCompetitor=a.addCalibrationCompetitor.bind(Object(f.a)(a)),a.handleChange=a.handleChange.bind(Object(f.a)(a)),a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"keyboardFunction",value:function(e){71===e.keyCode&&this.setState({record:"def"})}},{key:"componentDidMount",value:function(){document.title="Admin | Applaus-O-Meter"}},{key:"componentDidUpdate",value:function(e,t){be.dumpToLocalStorage()}},{key:"addCompetitor",value:function(e){e.preventDefault();var t=this.state.addCompetitorInput;""===t||function(e){var t=!1,a=M.getState().voting.competitors.byId;if(a)for(var n=0,r=Object.keys(a);n<r.length;n++)a[r[n]].name===e&&(t=!0);return t}(t)?this.props.dispatch(ee(new Date,"Error adding competitor. Does name already exist?")):this.props.dispatch({type:"ADD_COMPETITOR",competitorKey:t})}},{key:"addCalibrationCompetitor",value:function(e){e.preventDefault();var t=this.state.addCalibrationCompetitorInput;if(!this.state.competition.isCalibrationCompetitorNameAlreadyExists(t)&&""!==t){var a=this.state.competition;a.addCalibrationCompetitor(new fe.a(t)),this.setState({competition:a})}}},{key:"handleChange",value:function(e){this.setState(Object(h.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"container-fluid p-5"},s.a.createElement(Oe,null),s.a.createElement("header",{className:"pb-4"},s.a.createElement("h2",null,"Welcome to Applaus-O-Meter administration"),s.a.createElement("p",null,"To get started, add some competitors."),s.a.createElement(d.b,{to:"/view",className:"btn btn-primary"},"Open view \u21e8")),s.a.createElement("div",{id:"control",className:"mt-4"},s.a.createElement("h3",null,"Control"),s.a.createElement(le.a,null,s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-2"},s.a.createElement("label",{htmlFor:"initiateVolumeter"},"Initiate Volumemeter")),s.a.createElement("div",{className:"col-8"},s.a.createElement(oe.a,{variant:"secondary",size:"sm",onClick:function(){return e.props.dispatch(ae())}},"Initiate Volumemeter"))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-2"},s.a.createElement("label",{htmlFor:"dismissErrors"},"Dismiss all errors")),s.a.createElement("div",{className:"col-8"},s.a.createElement(oe.a,{variant:"danger",size:"sm",onClick:function(){return e.props.dispatch({type:"DISMISS_ALL_ERRORS"})}},"Dismiss all errors"))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-2"},s.a.createElement("label",{htmlFor:"showBlankInput"},"Show blank",s.a.createElement("br",null),"(currently ",this.props.showBlank?"yes":"no",")")),s.a.createElement("div",{className:"col-8 d-flex align-items-center"},s.a.createElement(le.a.Check,{type:"checkbox",checked:this.props.showBlank,onChange:function(){return e.props.dispatch({type:"SWITCH_BLANK"})}}))))),s.a.createElement("div",{id:"competitors",className:"border border-secondary p-2 bg-primary rounded"},s.a.createElement("h3",null,"Competitors"),s.a.createElement("form",{className:"row form-group",onSubmit:function(e){e.preventDefault()}},s.a.createElement("div",{className:"col-10"},s.a.createElement("input",{type:"text",className:"form-control w-100",name:"addCompetitorInput",value:this.state.addCompetitorInput,placeholder:"Competitor name",onChange:this.handleChange})),s.a.createElement("div",{className:"col-2"},s.a.createElement("input",{type:"button",className:"form-control btn btn-success",value:"Add!",onClick:this.addCompetitor}))),s.a.createElement("div",null,s.a.createElement(pe,{competition:this.state.competition}))),s.a.createElement("div",{id:"settings",className:"mt-4"},s.a.createElement("h3",null,"Settings"),s.a.createElement("form",{className:"form-group",onSubmit:function(e){e.preventDefault()}},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-2"},s.a.createElement("label",{htmlFor:"durationInput"},"Duration in seconds",s.a.createElement("br",null),"(currently ",this.props.duration/1e3," s)")),s.a.createElement("div",{className:"col-8"},s.a.createElement("input",{type:"text",className:"form-control w-100",name:"durationInput",value:this.state.durationInput,placeholder:"duration",onChange:this.handleChange})),s.a.createElement("div",{className:"col-2"},s.a.createElement("input",{type:"button",className:"form-control btn btn-success",value:"Set!",onClick:this.setDuration}))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-2"},s.a.createElement("label",{htmlFor:"maxVolInput"},"Max volume for rating, in range [0;1]",s.a.createElement("br",null),"(currently: ",this.props.maxVol,")")),s.a.createElement("div",{className:"col-8"},s.a.createElement("input",{type:"text",className:"form-control w-100",name:"maxVolInput",value:this.state.maxVolInput,onChange:this.handleChange})),s.a.createElement("div",{className:"col-2"},s.a.createElement("input",{type:"button",className:"form-control btn btn-success",value:"Set!",onClick:this.setMaxvol}))))),s.a.createElement("div",null))}}]),t}(l.Component),Ie=Object(E.b)(function(e){return{showBlank:e.control.showBlank,duration:e.administration.duration,maxVol:e.administration.maxVol}})(Ce),ke=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function xe(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}a(451);var Ne=a(208);var Se=Object(E.b)(function(e){return{competitors:e.voting.competitors.byId,ratings:e.voting.ratings,activeCompetitor:e.voting.activeCompetitor,duration:e.administration.duration}})(function(e){var t=e.competitors[e.competitorKey],a="text-primary",n="bg-info",r="text-secondary";_()===e.competitorKey&&(n="bg-success",a="text-secondary",r="text-secondary");var o=!1;t.stoppedRecording>Math.floor(Date.now())-1e3&&(o=!0);var i=s.a.createElement("div",{className:"card text-white text-center "+n},s.a.createElement("div",{className:"card-body"},s.a.createElement("div",null,s.a.createElement(g,{isActive:e.competitorKey===e.activeCompetitor})),s.a.createElement("h2",{className:"card-title "+a},t.name),s.a.createElement("div",{className:"card-text"},s.a.createElement("p",null,s.a.createElement("span",{className:"timeLeftText"},"Verbleibende Zeit:"),s.a.createElement("br",null),parseFloat((null!==t.timeLeft?t.timeLeft:e.duration)/1e3).toFixed(1)," Sekunden"),s.a.createElement("p",{className:"btn btn-primary ratingText "+r},"Wertung:\xa0",s.a.createElement("span",{className:"text-white"},e.ratings&&e.ratings.hasOwnProperty(e.competitorKey)?parseFloat(10*e.ratings[e.competitorKey]).toFixed(2):"\u2013")))));return t.isVisible?o?s.a.createElement("div",{className:"col-3",key:e.competitorKey},s.a.createElement(Ne.Wobble,null,i)):s.a.createElement("div",{className:"col-3",key:e.competitorKey},i):s.a.createElement(s.a.Fragment,null)});var je=Object(E.b)(function(e){return{competitorKeys:e.voting.competitors.allIds}})(function(e){return s.a.createElement("div",{id:"competitionCardContainer",className:"container-fluid px-5"},s.a.createElement("div",{className:"row justify-content-center"},e.competitorKeys.map(function(e){return s.a.createElement(Se,{key:e,competitorKey:e})})))}),De=(a(452),a(127)),Re=a(209),Te=a.n(Re),Ae=a(211),Le=a.n(Ae),Me=a(210),Ke=a.n(Me),Ve=function(e){function t(e,a){var r;return Object(n.a)(this,t),(r=Object(o.a)(this,Object(i.a)(t).call(this,e,a))).checkRating=function(){if(r.props.isActive)r.state.interval&&(clearInterval(r.state.interval),r.setState({interval:null})),r.props.rating!==r.state.rating&&r.setState({interval:null,rating:r.props.rating});else if(null===r.state.interval&&(r.props.dispatch(ae()),r.props.isInitialized)){var e=setInterval(function(){var e=H.getVolume();null!==e&&r.setState({rating:.1*B(e)})},100);r.setState({interval:e})}},r.state={interval:null,rating:0},r}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.checkRating()}},{key:"componentDidUpdate",value:function(e,t,a){this.checkRating()}},{key:"render",value:function(){var e=this.props.isActive,t=this.state.rating>0?786*-this.state.rating:0;return s.a.createElement("div",{className:"d-flex flex-column-reverse p-4"},s.a.createElement(Ke.a,{numberOfPieces:e?void 0:5,width:this.props.width,height:this.props.height,gravity:e?this.state.rating:.01,wind:e?.1*this.state.rating:0,recycle:!0,canvasRef:void 0}),s.a.createElement(De.SvgLoader,{path:Te.a,height:400,width:2e3},s.a.createElement(De.SvgProxy,{selector:"#clip-rect",transform:"translate(0 "+t+")"})))}}]),t}(l.Component);var _e=Object(E.b)(function(e){return{isInitialized:e.voting.isInitialized}})(function(e){var t=Le()(),a=t.width,n=t.height;return s.a.createElement(Ve,Object.assign({width:a,height:n},e))});var Pe=Object(E.b)(function(e){return{title:e.administration.title}})(function(e){return s.a.createElement("footer",{className:"container-fluid py-1 px-5 text-right"},"Applaus-O-Meter | ",e.title," | mail@yorickreum.de")}),Fe=a(86);var Be=Object(E.b)(function(e){return{showBlank:e.control.showBlank,activeCompetitor:e.voting.activeCompetitor,ratings:e.voting.ratings}})(function(e){var t=0,a=!1,n=e.activeCompetitor;return n&&(a=!0,t=e.ratings[n]),s.a.createElement(s.a.Fragment,null,s.a.createElement(Fe.Helmet,null,s.a.createElement("title",null,"View | Applaus-O-Meter")),!e.showBlank&&s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{id:"frontend",className:"container-fluid py-2 rounded-0"},s.a.createElement("div",{id:"graphic",className:"d-flex justify-content-center"},s.a.createElement(_e,{isActive:a,rating:t})),s.a.createElement("div",{id:"information"},s.a.createElement(je,null))),s.a.createElement(Pe,null)))});var Ue=Object(E.b)(function(e){return{title:e.administration.title}})(function(e){return s.a.createElement("div",{className:"container-fluid pt-2"},s.a.createElement("h2",{className:"text-center text-warning"},"Applaus-O-Meter"),s.a.createElement("h1",{id:"mainHeading",className:"text-center text-white py-1"},e.title))}),He=function(e){function t(){return Object(n.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){document.title="Applaus-O-Meter"}},{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row justify-content-center"},s.a.createElement("div",{className:"col-4"},s.a.createElement("div",{className:"card h-100 text-white text-center bg-warning"},s.a.createElement("div",{className:"card-body py-5"},s.a.createElement("h2",{className:"card-title text-primary pb-3"},"Administration"),s.a.createElement("div",{className:"card-text"},s.a.createElement("ul",{className:"text-left"},s.a.createElement("li",null,"Teilnehmner anlegen und verwalten"),s.a.createElement("li",null,"Abstimmungen starten")),s.a.createElement(d.b,{to:"/admin",className:"btn btn-primary"},"Hier entlang \u21e8"))))),s.a.createElement("div",{className:"col-4"},s.a.createElement("div",{className:"card h-100 text-white text-center bg-warning"},s.a.createElement("div",{className:"card-body py-5"},s.a.createElement("h2",{className:"card-title text-primary pb-3"},"Abstimmung"),s.a.createElement("div",{className:"card-text"},s.a.createElement("p",null,"Zum Beispiel in neuem Fenster \xf6ffnen und auf Beamer zeigen."),s.a.createElement(d.b,{to:"/view",className:"btn btn-primary"},"Hier entlang \u21e8"))))))))}}]),t}(l.Component);u.a.render(s.a.createElement(E.a,{store:M},s.a.createElement(p.a,{loading:null,persistor:K},s.a.createElement(Fe.Helmet,null,s.a.createElement("meta",{charSet:"utf-8"}),s.a.createElement("title",null,"Applaus-O-Meter")),s.a.createElement(Ue,null),s.a.createElement(d.a,null,s.a.createElement(v.c,null,s.a.createElement(v.a,{exact:!0,path:"/",component:He}),s.a.createElement(v.a,{path:"/admin",component:Ie}),s.a.createElement(v.a,{path:"/view",component:Be}))))),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/react-applaus-o-meter",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/react-applaus-o-meter","/service-worker.js");ke?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):xe(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):xe(e)})}}()},85:function(e,t){}},[[235,1,2]]]);
//# sourceMappingURL=main.796125d6.chunk.js.map
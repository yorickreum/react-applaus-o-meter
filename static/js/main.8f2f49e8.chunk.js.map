{"version":3,"sources":["assets/castle.svg","components/RecordingDot.js","utils/crosstabSync.js","utils/volumemeterUtils.js","reducers.js","constants.js","store.js","utils/competitionUtils.js","actions.js","components/CompetitorTableRow.js","components/CompetitionTable.js","entities/Competition.js","screens/Admin.js","registerServiceWorker.js","components/CompetitorCard.js","components/CompetitionCards.js","components/CalibrationCards.js","meters/Castlemeter.js","screens/View.js","components/Heading.js","components/Footer.js","index.js"],"names":["module","exports","__webpack_require__","p","recordingDotStyle","dot","textShadow","RecordingDot","props","activeClass","isActive","react_default","a","createElement","className","style","crosstabSync","store","persistConfig","crosstabConfig","blacklist","whitelist","keyPrefix","KEY_PREFIX","key","window","addEventListener","e","indexOf","oldValue","newValue","statePartial","JSON","parse","state","Object","keys","reduce","reducerKey","dispatch","payload","type","REHYDRATE","VolumemeterUtils","clipLevel","averaging","clipLag","classCallCheck","this","AudioContext","webkitAudioContext","audioContext","processor","createScriptProcessor","onaudioprocess","volumeAudioProcess","clipping","lastClip","volume","connect","destination","checkClipping","performance","now","shutdown","disconnect","navigator","getUserMedia","webkitGetUserMedia","mozGetUserMedia","audio","mandatory","googEchoCancellation","googAutoGainControl","googNoiseSuppression","googHighpassFilter","optional","gotStream","didntGetStream","console","log","stream","createMediaStreamSource","event","x","buf","inputBuffer","getChannelData","sum","i","length","Math","abs","rms","sqrt","max","initialStates","administration","title","maxVol","duration","voting","volumemeter","activeCompetitor","competitors","byId","allIds","calibrationCompetitors","ratings","combineReducers","arguments","undefined","action","objectSpread","competitorKey","defineProperty","name","isVisible","startedRecording","stoppedRecording","levels","timeLefts","measureDuration","timeLeft","interval","concat","toConsumableArray","forEach","filter","value","rating","storage","persistedReducer","persistReducer","rootReducer","composeEnhancer","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","createStore","applyMiddleware","thunk","persistor","persistStore","getLeader","getState","leadingCompetitor","compKey","getRating","competitor","pv","cv","showCompetitor","hideCompetitor","startRecording","recordValue","floor","Date","getVolume","saveValue","updateRating","clearInterval","stopRecording","updateAllRatings","setDuration","setMaxvol","CompetitorTableRow","_this","possibleConstructorReturn","getPrototypeOf","call","handleShow","setState","showModal","changeVisibility","_this2","data","index","level","Fragment","addClass","components_RecordingDot","hasOwnProperty","toFixed","Form_default","Check","checked","onClick","Button_default","variant","Modal","show","size","onHide","width","centered","Header","closeButton","Title","color","Body","es6","height","strokeDasharray","dataKey","cursor","fill","y","stroke","timestamp","parseInt","setInterval","startCompetitor","resetCompetitor","deleteCompetitor","Component","CompetitionTable","map","components_CompetitorTableRow","Competition","_Competition","instance","reset","_duration","stateCallbacks","push","cb","exists","comp","comps","splice","update","calibrating","localStorage","setItem","stringify","str","encodeURIComponent","selectorFiles","file","reader","FileReader","onload","target","result","callbacks","revive","dumpToLocalStorage","bind","readAsText","newComp","Competitor","addCompetitor","CalibrationCompetitor","addCalibrationCompetitor","Admin","durationInput","parseFloat","maxVolInput","toString","replace","addCompetitorInput","addCalibrationCompetitorInput","assertThisInitialized","handleChange","keyCode","record","document","prevProps","prevState","preventDefault","doesCompetitorNameAlreadyExists","competition","isCalibrationCompetitorNameAlreadyExists","id","onSubmit","htmlFor","placeholder","onChange","components_CompetitionTable","isLocalhost","Boolean","location","hostname","match","registerValidSW","swUrl","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","catch","error","competitorNameClass","cardBgClass","ratingClass","bounce","card","react_motions_min","competitorKeys","components_CompetitorCard","CalibrationCard","getMax","CalibrationCards","Castlemeter","_useWindowSize","useWindowSize","rotation","react_confetti_min_default","numberOfPieces","gravity","wind","recycle","canvasRef","react_svgmt","path","castle","selector","transform","View","isCalibrating","meters_Castlemeter","components_CalibrationCards","components_CompetitionCards","Areas","react_router_dom","to","ReactDOM","render","es","integration_react","loading","components_Heading","react_router","exact","component","components_Footer","getElementById","URL","process","origin","fetch","response","status","headers","get","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker"],"mappings":"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","file":"static/js/main.8f2f49e8.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/castle.0543640b.svg\";","import React from \"react\";\n\nconst recordingDotStyle = {\n    dot: {\n        textShadow: \"0 0 8px #404040\",\n    }\n};\n\nfunction RecordingDot(props) {\n    const isActive = props.isActive;\n    const activeClass = isActive ? \"text-danger\" : \"text-info\";\n    return <span className={activeClass} style={recordingDotStyle.dot}>&#9673;</span>;\n}\n\nexport default RecordingDot\n","// @TODO\n// update repo: https://github.com/rt2zz/redux-persist-crosstab\n\n// @flow\nimport {KEY_PREFIX, REHYDRATE} from 'redux-persist/lib/constants'\nimport type {PersistConfig} from 'redux-persist/es/types'\nimport type {Store} from 'redux'\n\ntype CrosstabConfig = {\n    blacklist?: ?Array<string>,\n    keyPrefix?: ?string,\n    whitelist?: ?Array<string>,\n}\n\nfunction crosstabSync(store: Store, persistConfig?: PersistConfig, crosstabConfig?: CrosstabConfig) {\n    const blacklist: ?Array<string> = (crosstabConfig && crosstabConfig.blacklist) ? crosstabConfig.blacklist : null;\n    const whitelist: ?Array<string> = (crosstabConfig && crosstabConfig.whitelist) ? crosstabConfig.whitelist : null;\n    const keyPrefix: string = (crosstabConfig && crosstabConfig.keyPrefix) ? crosstabConfig.keyPrefix : KEY_PREFIX;\n\n    const {key}: { key: string } = persistConfig;\n\n    window.addEventListener('storage', handleStorageEvent, false)\n\n    function handleStorageEvent(e) {\n        if (e.key && e.key.indexOf(keyPrefix) === 0) {\n            if (e.oldValue === e.newValue) {\n                return\n            }\n\n            const statePartial: { [string]: string } = JSON.parse(e.newValue)\n\n            /* eslint-disable flowtype/no-weak-types */\n            const state: Object = Object.keys(statePartial).reduce((state, reducerKey) => {\n                /* eslint-enable flowtype/no-weak-types */\n                if (whitelist && whitelist.indexOf(reducerKey) === -1) {\n                    return state\n                }\n                if (blacklist && blacklist.indexOf(reducerKey) !== -1) {\n                    return state\n                }\n\n                state[reducerKey] = JSON.parse(statePartial[reducerKey])\n\n                return state\n            }, {})\n\n            store.dispatch({\n                key,\n                payload: state,\n                type: REHYDRATE,\n            })\n        }\n    }\n}\n\nexport default crosstabSync\n","class VolumemeterUtils {\n\n    constructor( clipLevel, averaging, clipLag ) {\n        let AudioContext = window.AudioContext || window.webkitAudioContext;\n        window.audioContext = new AudioContext();\n        window.processor = window.audioContext.createScriptProcessor(512);\n        window.processor.onaudioprocess = this.volumeAudioProcess;\n        window.processor.clipping = false;\n        window.processor.lastClip = 0;\n        window.processor.volume = 0;\n        window.processor.clipLevel = clipLevel || 0.98;\n        window.processor.averaging = averaging || 0.95;\n        window.processor.clipLag = clipLag || 750;\n\n        window.processor.connect(window.audioContext.destination);\n\n        window.processor.checkClipping =\n            function(){\n                if (!this.clipping)\n                    return false;\n                if ((this.lastClip + this.clipLag) < window.performance.now())\n                    this.clipping = false;\n                return this.clipping;\n            };\n\n        window.processor.shutdown =\n            function(){\n                this.disconnect();\n                this.onaudioprocess = null;\n            };\n\n        try {\n            // monkeypatch getUserMedia\n            navigator.getUserMedia =\n                navigator.getUserMedia ||\n                navigator.webkitGetUserMedia ||\n                navigator.mozGetUserMedia;\n\n            // ask for an audio input\n            navigator.getUserMedia(\n                {\n                    \"audio\": {\n                        \"mandatory\": {\n                            \"googEchoCancellation\": \"false\",\n                            \"googAutoGainControl\": \"false\",\n                            \"googNoiseSuppression\": \"false\",\n                            \"googHighpassFilter\": \"false\"\n                        },\n                        \"optional\": []\n                    },\n                }, this.gotStream, this.didntGetStream);\n        } catch (e) {\n            console.log('getUserMedia threw exception :' + e);\n        }\n\n    }\n\n    didntGetStream() {\n        console.log('Stream generation failed.');\n    }\n\n    gotStream(stream) {\n        // Create an AudioNode from the stream.\n        let mediaStreamSource = window.audioContext.createMediaStreamSource(stream);\n        mediaStreamSource.connect(window.processor);\n    }\n\n    volumeAudioProcess( event ) {\n        var buf = event.inputBuffer.getChannelData(0);\n        var sum = 0;\n        var x;\n\n        // Do a root-mean-square on the samples: sum up the squares...\n        for (var i=0; i<buf.length; i++) {\n            x = buf[i];\n            if (Math.abs(x)>=this.clipLevel) {\n                this.clipping = true;\n                this.lastClip = window.performance.now();\n            }\n            sum += x * x;\n        }\n\n        // ... then take the square root of the sum.\n        var rms =  Math.sqrt(sum / buf.length);\n\n        // Now smooth this out with the averaging factor applied\n        // to the previous sample - take the max here because we\n        // want \"fast attack, slow release.\"\n        this.volume = Math.max(rms, this.volume*this.averaging);\n    }\n\n    getVolume() {\n        return window.processor.volume;\n    }\n}\n\nexport default VolumemeterUtils\n","import {combineReducers} from 'redux'\n\nimport {\n    ADD_COMPETITOR,\n    DELETE_COMPETITOR,\n    HIDE_COMPETITOR,\n    RESET_COMPETITOR,\n    SAVE_VALUE,\n    SET_DURATION,\n    SET_MAXVOL,\n    SET_TITLE,\n    SHOW_COMPETITOR,\n    START_RECORDING,\n    STOP_RECORDING,\n    UPDATE_RATING\n} from \"./constants\";\n\nimport VolumemeterUtils from \"./utils/volumemeterUtils\";\n\nconst initialStates = {\n    administration: {\n        title: 'Slammen im Schloss V',\n        maxVol: 1,\n        duration: 10000\n    },\n    voting: {\n        volumemeter: null,//new VolumemeterUtils(),\n        activeCompetitor: null,\n        competitors: {\n            byId: {},\n            allIds: []\n        },\n        calibrationCompetitors: {\n            byId: {},\n            allIds: []\n        },\n        ratings: {}\n    }\n};\n\nconst administration = (state = initialStates.administration, action) => {\n    switch (action.type) {\n        case SET_TITLE:\n            return {\n                ...state,\n                title: action.title\n            };\n        case SET_DURATION:\n            return {\n                ...state,\n                duration: action.duration\n            };\n        case SET_MAXVOL:\n            return {\n                ...state,\n                maxVol: action.maxVol\n            };\n        default:\n            return state;\n    }\n};\n\nconst voting = (state = initialStates.voting, action) => {\n    let ratings;\n    switch (action.type) {\n        case ADD_COMPETITOR:\n            return {\n                ...state,\n                activeCompetitor: (state.activeCompetitor === action.competitorKey ? null : state.activeCompetitor),\n                competitors: {\n                    byId: {\n                        ...state.competitors.byId,\n                        [action.competitorKey]: {\n                            name: action.competitorKey,\n                            isVisible: true,\n                            startedRecording: null,\n                            stoppedRecording: null,\n                            levels: [],\n                            timeLefts: [],\n                            measureDuration: null,\n                            timeLeft: null,\n                            interval: null,\n                        }\n                    },\n                    allIds: [...state.competitors.allIds, action.competitorKey]\n                }\n            };\n        case DELETE_COMPETITOR:\n            const byId = {...state.competitors.byId};\n            byId[action.competitorKey] = undefined;\n            Object.keys(byId).forEach(key => byId[key] === undefined ? delete byId[key] : '');\n            ratings = {...state.ratings};\n            ratings[action.competitorKey] = undefined;\n            Object.keys(ratings).forEach(key => ratings[key] === undefined ? delete ratings[key] : '');\n            return {\n                ...state,\n                competitors: {\n                    ...state.competitors,\n                    byId: {\n                        ...byId\n                    },\n                    allIds: [\n                        ...state.competitors.allIds.filter(key => key !== action.competitorKey),\n                    ]\n                },\n                ratings\n            };\n        case START_RECORDING:\n            return {\n                ...state,\n                volumemeter: new VolumemeterUtils(),\n                activeCompetitor: action.competitorKey,\n                competitors: {\n                    ...state.competitors,\n                    byId: {\n                        ...state.competitors.byId,\n                        [action.competitorKey]: {\n                            ...state.competitors.byId[action.competitorKey],\n                            interval: action.interval,\n                            measureDuration: action.measureDuration,\n                            startedRecording: action.startedRecording\n                        }\n                    }\n                }\n            };\n        case RESET_COMPETITOR:\n            ratings = {...state.ratings};\n            ratings[action.competitorKey] = undefined;\n            Object.keys(ratings).forEach(key => ratings[key] === undefined ? delete ratings[key] : '');\n            return {\n                ...state,\n                activeCompetitor: (state.activeCompetitor === action.competitorKey ? null : state.activeCompetitor),\n                competitors: {\n                    ...state.competitors,\n                    byId: {\n                        ...state.competitors.byId,\n                        [action.competitorKey]: {\n                            ...state.competitors.byId[action.competitorKey],\n                            isVisible: true,\n                            startedRecording: null,\n                            stoppedRecording: null,\n                            levels: [],\n                            timeLefts: [],\n                            measureDuration: null,\n                            timeLeft: null,\n                            interval: null,\n                        }\n                    }\n                },\n                ratings\n            };\n        case SHOW_COMPETITOR:\n            return {\n                ...state,\n                competitors: {\n                    ...state.competitors,\n                    byId: {\n                        ...state.competitors.byId,\n                        [action.competitorKey]: {\n                            ...state.competitors.byId[action.competitorKey],\n                            isVisible: true,\n                        }\n                    }\n                }\n            };\n        case HIDE_COMPETITOR:\n            return {\n                ...state,\n                competitors: {\n                    ...state.competitors,\n                    byId: {\n                        ...state.competitors.byId,\n                        [action.competitorKey]: {\n                            ...state.competitors.byId[action.competitorKey],\n                            isVisible: false,\n                        }\n                    }\n                }\n            };\n        case SAVE_VALUE:\n            return {\n                ...state,\n                competitors: {\n                    ...state.competitors,\n                    byId: {\n                        ...state.competitors.byId,\n                        [action.competitorKey]: {\n                            ...state.competitors.byId[action.competitorKey],\n                            timeLeft: action.timeLeft,\n                            levels: [\n                                ...state.competitors.byId[action.competitorKey].levels,\n                                action.value\n                            ],\n                            timeLefts: [\n                                ...state.competitors.byId[action.competitorKey].timeLefts,\n                                action.timeLeft\n                            ],\n                        }\n                    }\n                }\n            };\n        case STOP_RECORDING:\n            return {\n                ...state,\n                activeCompetitor: null,\n                competitors: {\n                    ...state.competitors,\n                    byId: {\n                        ...state.competitors.byId,\n                        [action.competitorKey]: {\n                            ...state.competitors.byId[action.competitorKey],\n                            timeLeft: 0,\n                            stoppedRecording: action.stoppedRecording,\n                        }\n                    }\n                }\n            };\n        case UPDATE_RATING:\n            return {\n                ...state,\n                ratings: {\n                    ...state.ratings,\n                    [action.competitorKey]: action.rating\n                }\n            };\n        default:\n            return state;\n    }\n};\n\nexport default combineReducers({\n    administration,\n    voting\n})\n","export const ADD_COMPETITOR = 'ADD_COMPETITOR';\nexport const DELETE_COMPETITOR = 'DELETE_COMPETITOR';\nexport const RESET_COMPETITOR = 'RESET_COMPETITOR ';\nexport const SHOW_COMPETITOR = 'SHOW_COMPETITOR';\nexport const HIDE_COMPETITOR = 'HIDE_COMPETITOR';\n\nexport const START_RECORDING = 'START_RECORDING';\nexport const STOP_RECORDING = 'STOP_RECORDING';\nexport const RECORD_VALUE = 'RECORD_VALUE';\nexport const SAVE_VALUE = 'SAVE_VALUE';\nexport const UPDATE_RATING = 'UPDATE_RATING';\nexport const UPDATE_ALL_RATINGS = 'UPDATE_ALL_RATINGS';\n\nexport const SET_TITLE = 'SET_TITLE';\nexport const SET_DURATION = 'SET_DURATION';\nexport const SET_MAXVOL = 'SET_MAXVOL';\n","import {applyMiddleware, compose, createStore} from \"redux\";\nimport {persistReducer, persistStore} from 'redux-persist'\nimport storage from 'redux-persist/lib/storage' // defaults to localStorage for web\nimport crosstabSync from \"./utils/crosstabSync\"\nimport rootReducer from \"./reducers\";\nimport thunk from \"redux-thunk\";\n\nconst persistConfig = {\n    key: 'root',\n    storage,\n};\n\nconst persistedReducer = persistReducer(persistConfig, rootReducer)\nconst composeEnhancer = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\nexport const store = createStore(\n    persistedReducer,\n    composeEnhancer(applyMiddleware(thunk)),\n);\n\ncrosstabSync(store, persistConfig);\n\nexport const persistor = persistStore(store);\n","import {store} from \"../store\";\n\n/**\n *\n * @param name\n * @returns {boolean}\n */\nexport function doesCalibrationCompetitorNameAlreadyExists(name) {\n    let exists = false;\n    store.getState().voting.calibrationCompetitors.forEach(function (comp) {\n        if (name === comp.name) {\n            exists = true;\n        }\n    });\n    return exists;\n}\n\n/**\n *\n * @param name\n * @returns {boolean}\n */\nexport function doesCompetitorNameAlreadyExists(name) {\n    let exists = false;\n    const competitors = store.getState().voting.competitors;\n    for (let key in competitors) {\n        if (competitors.hasOwnProperty(key)) {\n            if (name === key) {\n                exists = true;\n            }\n        }\n    }\n    return exists;\n}\n\nexport function getLeader() {\n    const competitors = store.getState().voting.competitors.allIds;\n    let leadingCompetitor = null;\n    if (competitors[0]) {\n        leadingCompetitor = competitors[0];\n        competitors.forEach(function (compKey) {\n            if (getRating(compKey) >= getRating(leadingCompetitor)) {\n                leadingCompetitor = compKey;\n            }\n        });\n    }\n    if (leadingCompetitor && getRating(leadingCompetitor) !== 0) {\n        return leadingCompetitor;\n    } else {\n        return null;\n    }\n}\n\nexport function getRating(competitorKey: string) {\n    let state = store.getState();\n    const competitor = state.voting.competitors.byId[competitorKey];\n    if (competitor.levels.length === 0) {\n        return 0;\n    } else {\n        let levelSum = competitor.levels.reduce((pv, cv) => pv + cv, 0);\n        return (levelSum / competitor.levels.length) / state.administration.maxVol;\n    }\n}\n\n","import {getRating} from \"./utils/competitionUtils\";\nimport {\n    ADD_COMPETITOR,\n    DELETE_COMPETITOR,\n    HIDE_COMPETITOR,\n    RESET_COMPETITOR,\n    SAVE_VALUE,\n    SET_DURATION,\n    SET_MAXVOL,\n    SET_TITLE,\n    SHOW_COMPETITOR,\n    START_RECORDING,\n    STOP_RECORDING,\n    UPDATE_RATING\n} from \"./constants\";\n\nexport const addCompetitor = (competitorKey: string) => ({\n    type: ADD_COMPETITOR,\n    competitorKey\n});\n\nexport const deleteCompetitor = (competitorKey: string) => ({\n    type: DELETE_COMPETITOR,\n    competitorKey\n});\n\nexport const startCompetitor = (competitorKey: string) => {\n    return (dispatch, getState) => {\n        const state = getState();\n\n        console.log(competitorKey + ' starts measuring!');\n        console.log('duration: ' + state.administration.duration);\n\n        let timestamp = Math.floor(Date.now());\n        const startedRecording = parseInt(timestamp, 10);\n\n        const interval = setInterval(\n            () => {\n                console.log(\"going to record value for: \" + competitorKey)\n                dispatch(recordValue(competitorKey))\n            },\n            100 // ms, normally 10\n        );\n\n        dispatch(startRecording(\n            competitorKey,\n            interval,\n            state.administration.duration,\n            startedRecording,\n            true\n        ));\n    }\n};\n\nexport const resetCompetitor = (competitorKey: string) => ({\n    type: RESET_COMPETITOR,\n    competitorKey\n});\n\nexport const showCompetitor = (competitorKey: string) => ({\n    type: SHOW_COMPETITOR,\n    competitorKey\n});\n\nexport const hideCompetitor = (competitorKey: string) => ({\n    type: HIDE_COMPETITOR,\n    competitorKey\n});\n\nexport const startRecording\n    = (competitorKey: string,\n       interval,\n       duration: number,\n       startedRecording: Date,\n       isActive: boolean) => ({\n    type: START_RECORDING,\n    competitorKey,\n    interval,\n    duration,\n    startedRecording,\n    isActive,\n});\n\nexport const recordValue = (competitorKey: string) => {\n    return (dispatch, getState) => {\n        const state = getState();\n        const competitor = state.voting.competitors.byId[competitorKey];\n\n        let interval = competitor.interval;\n\n        let timeLeft =\n            state.administration.duration -\n            (Math.floor(Date.now()) - competitor.startedRecording);\n\n        if (timeLeft > 0) {\n            let value = state.voting.volumemeter.getVolume();\n            dispatch(saveValue(\n                competitorKey,\n                value,\n                timeLeft,\n            ));\n            dispatch(updateRating(\n                competitorKey,\n                getRating(competitorKey),\n            ));\n        } else {\n            clearInterval(interval);\n            const stoppedRecording = Math.floor(Date.now());\n            dispatch(stopRecording(\n                competitorKey,\n                stoppedRecording,\n            ));\n        }\n    }\n};\n\nexport const updateAllRatings = (competitorKey: string) => {\n    return (dispatch, getState) => {\n        const state = getState();\n        Object.keys(state.voting.ratings).forEach(competitorKey => {\n            dispatch(updateRating(\n                competitorKey,\n                getRating(competitorKey),\n            ));\n        });\n    }\n};\n\nexport const saveValue\n    = (competitorKey: string,\n       value: number,\n       timeLeft: number) => ({\n    type: SAVE_VALUE,\n    competitorKey,\n    value,\n    timeLeft,\n});\n\nexport const updateRating\n    = (competitorKey: string,\n       rating: number) => ({\n    type: UPDATE_RATING,\n    competitorKey,\n    rating,\n});\n\nexport const stopRecording\n    = (competitorKey: string,\n       stoppedRecording: Date) => ({\n    type: STOP_RECORDING,\n    competitorKey,\n    stoppedRecording,\n});\n\nexport const setTitle = (title: string) => ({\n    type: SET_TITLE,\n    title\n});\n\nexport const setDuration = (duration: number) => ({\n    type: SET_DURATION,\n    duration\n});\n\nexport const setMaxvol = (maxVol: number) => ({\n    type: SET_MAXVOL,\n    maxVol\n});\n","import React, {Component} from 'react';\nimport RecordingDot from \"./RecordingDot\";\nimport {connect} from \"react-redux\";\nimport {\n    deleteCompetitor,\n    hideCompetitor,\n    resetCompetitor,\n    showCompetitor,\n    startCompetitor\n} from \"../actions\";\nimport {\n    CartesianGrid,\n    ReferenceLine,\n    ResponsiveContainer,\n    Scatter,\n    ScatterChart,\n    Tooltip,\n    XAxis,\n    YAxis\n} from \"recharts\";\nimport {getRating} from \"../utils/competitionUtils\";\nimport Button from \"react-bootstrap/Button\";\nimport {Modal} from \"react-bootstrap\";\nimport Form from \"react-bootstrap/Form\";\n\nclass CompetitorTableRow extends Component<{}> {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            showModal: false,\n        };\n    }\n\n    handleShow = () => {\n        this.setState({\n            showModal: !this.state.showModal\n        })\n    };\n\n    changeVisibility = () => {\n        const competitorKey = this.props.competitor;\n        const competitor = this.props.competitors.byId[competitorKey];\n        if (competitor.isVisible) {\n            this.props.dispatch(hideCompetitor(competitorKey))\n        } else {\n            this.props.dispatch(showCompetitor(competitorKey))\n        }\n    };\n\n    render() {\n        const competitorKey = this.props.competitor;\n        const competitor = this.props.competitors.byId[competitorKey];\n        let data = [];\n        competitor.levels.forEach((value, index) => {\n            data = [\n                ...data,\n                {\n                    timeLeft: competitor.timeLefts[index],\n                    level: value\n                }\n            ]\n        });\n        return (\n            <React.Fragment>\n                <tr key={competitorKey} className={this.props.addClass}>\n                    <td>\n                        <RecordingDot isActive={competitorKey === this.props.activeCompetitor}/>\n                    </td>\n                    <td>{competitorKey}</td>\n                    <td>{(this.props.ratings && this.props.ratings.hasOwnProperty(competitorKey)) ? this.props.ratings[competitorKey].toFixed(4) : ''}</td>\n                    <td>{competitor.timeLeft ? (competitor.timeLeft / 1000).toFixed(3) : ''}</td>\n                    <td>\n                        <Form>\n                            <Form.Check\n                                type=\"checkbox\" /*why switch doesnt work?*/\n                                checked={competitor.isVisible}\n                                onClick={this.changeVisibility}\n                            />\n                        </Form>\n                    </td>\n                    <td>\n                        {(this.props.ratings && this.props.ratings.hasOwnProperty(competitorKey))\n                            ? (\n                                <React.Fragment>\n                                    <Button variant=\"info\" onClick={this.handleShow}>Show Data</Button>\n                                    <Modal\n                                        show={this.state.showModal}\n                                        size={\"xl\"}\n                                        onHide={this.handleShow}\n                                        width={900}\n                                        centered>\n                                        <Modal.Header closeButton>\n                                            <Modal.Title style={{color: 'black'}}>Data\n                                                of {competitor.name}</Modal.Title>\n                                        </Modal.Header>\n                                        <Modal.Body>\n                                            <ResponsiveContainer width=\"100%\" height={400}>\n                                                <ScatterChart>\n                                                    <CartesianGrid strokeDasharray=\"1 1\"/>\n                                                    <XAxis dataKey=\"timeLeft\" name=\"timeLeft\"/>\n                                                    <YAxis dataKey=\"level\" name=\"level\"/>\n                                                    <Tooltip cursor={{strokeDasharray: '3 3'}}/>\n                                                    <Scatter name=\"Levels\" data={data} fill=\"#8884d8\"/>\n                                                    <ReferenceLine y={getRating(competitorKey)} stroke=\"red\"/>\n                                                </ScatterChart>\n                                            </ResponsiveContainer>\n                                        </Modal.Body>\n                                    </Modal>\n                                </React.Fragment>\n                            )\n                            : ''\n                        }\n                    </td>\n                    <td>\n                        <input type=\"button\" className=\"form-control btn btn-primary\" value=\"Start\"\n                               onClick={() => this.props.dispatch(startCompetitor(competitorKey, this.props.measureDuration))}/>\n                    </td>\n                    <td>\n                        <input type=\"button\" className=\"form-control btn btn-warning\" value=\"Reset\"\n                               onClick={() => this.props.dispatch(resetCompetitor(competitorKey))}/>\n                    </td>\n                    <td>\n                        <input type=\"button\" className=\"form-control btn btn-danger\" value=\"Delete\"\n                               onClick={() => this.props.dispatch(deleteCompetitor(competitorKey))}/>\n                    </td>\n                </tr>\n            </React.Fragment>\n        );\n    }\n}\n\nconst mapStateToProps = state => ({\n    competitors: state.voting.competitors,\n    activeCompetitor: state.voting.activeCompetitor,\n    ratings: state.voting.ratings,\n    measureDuration: state.administration.duration\n});\n\nexport default connect(mapStateToProps)(CompetitorTableRow)\n","import React, {Component} from 'react'\nimport CompetitorTableRow from \"./CompetitorTableRow\";\nimport {connect} from \"react-redux\";\nimport {getLeader} from \"../utils/competitionUtils\";\n\nclass CompetitionTable extends Component {\n    render() {\n        return (\n            <div>\n                Leading competitor is displayed red.\n                <table className=\"table table-dark   table-striped table-hover\">\n                    <thead>\n                    <tr>\n                        <td>Status</td>\n                        <td>Name</td>\n                        <td>Rating</td>\n                        <td>Time left</td>\n                        <td>Visibility</td>\n                        <td>Data</td>\n                        <td>Start</td>\n                        <td>Reset</td>\n                        <td>Delete</td>\n                    </tr>\n                    </thead>\n                    <tbody>\n                    {this.props.competitors.byId && Object.keys(this.props.competitors.byId).length > 0 && Object.keys(this.props.competitors.byId).map(\n                        key =>\n                            <React.Fragment key={key}>\n                                <CompetitorTableRow competitor={key} addClass={((key === getLeader()) ? 'text-danger' : '')} />\n                            </React.Fragment>)\n                    }\n                    </tbody>\n                </table>\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = state => ({\n    competitors: state.voting.competitors,\n});\n\nexport default connect(mapStateToProps)(CompetitionTable);\n","import Competitor from './Competitor';\nimport CalibrationCompetitor from \"./CalibrationCompetitor\";\n\nclass _Competition {\n    constructor() {\n        if (!_Competition.instance) {\n\n            this.reset();\n\n            _Competition.instance = this;\n        }\n        return _Competition.instance;\n    }\n\n    reset() {\n        this.competitors = [];\n        this._duration = 10000;\n        this.calibrationCompetitors = [];\n        this.maxVol = 1;\n        this.stateCallbacks = [];\n    }\n\n    /**\n     *\n     * @param {Competitor} competitor\n     */\n    addCompetitor(competitor) {\n        this.competitors.push(competitor);\n    }\n\n    /**\n     *\n     * @param {CalibrationCompetitor} competitor\n     */\n    addCalibrationCompetitor(competitor) {\n        this.calibrationCompetitors.push(competitor);\n    }\n\n    get duration() {\n        return this._duration;\n    }\n\n    set duration(value) {\n        this._duration = parseInt(value, 10);\n    }\n\n    update() {\n        this.stateCallbacks.forEach(function (cb) {\n            if (cb) {\n                cb();\n            }\n        })\n    }\n\n    /**\n     *\n     * @param {string} name\n     * @returns {boolean}\n     */\n    isCompetitorNameAlreadyExists(name) {\n        let exists = false;\n        this.competitors.forEach(function (comp) {\n            if (name === comp.name) {\n                exists = true;\n            }\n        });\n        return exists;\n    }\n\n    /**\n     *\n     * @param name\n     * @returns {boolean}\n     */\n    isCalibrationCompetitorNameAlreadyExists(name) {\n        let exists = false;\n        this.calibrationCompetitors.forEach(function (comp) {\n            if (name === comp.name) {\n                exists = true;\n            }\n        });\n        return exists;\n    }\n\n    removeCompetitor(competitor) {\n        this.competitors.forEach(function (comp, index, comps) {\n            if (competitor === comp) {\n                comps.splice(index, 1);\n            }\n        });\n        this.update();\n    }\n\n    removeCalibrationCompetitor(competitor) {\n        this.calibrationCompetitors.forEach(function (comp, index, comps) {\n            if (competitor === comp) {\n                comps.splice(index, 1);\n            }\n        });\n        this.update();\n    }\n\n\n    /**\n     *\n     * @returns {Competitor}\n     */\n    getActiveCompetitor() {\n        let activeCompetitor = null;\n        this.competitors.forEach(function (comp) {\n            if (comp.isActive) {\n                activeCompetitor = comp;\n            }\n        });\n        return activeCompetitor;\n    }\n\n    getActiveCalibrationCompetitor() {\n        let activeCompetitor = null;\n        this.calibrationCompetitors.forEach(function (comp) {\n            if (comp.isActive) {\n                activeCompetitor = comp;\n            }\n        });\n        return activeCompetitor;\n    }\n\n    getLeader() {\n        let leadingCompetitor = null;\n        if (this.competitors[0]) {\n            leadingCompetitor = this.competitors[0];\n            this.competitors.forEach(function (comp, index, comps) {\n                if (comp.rating >= leadingCompetitor.rating) {\n                    leadingCompetitor = comp;\n                }\n            });\n        }\n        if (leadingCompetitor && leadingCompetitor.rating !== 0) {\n            return leadingCompetitor;\n        }\n        else {\n            return null;\n        }\n    }\n\n    isCalibrating() {\n        let calibrating = false;\n        this.calibrationCompetitors.forEach(function (comp) {\n            if (comp.isActive) {\n                calibrating = true;\n            }\n        });\n        return calibrating;\n    }\n\n    dumpToLocalStorage() {\n        localStorage.setItem('competition', JSON.stringify(this));\n    }\n\n    getJsonDateUri() {\n        let str = JSON.stringify(this, null, '\\t');\n        return 'data:application/json;charset=utf-8,' + encodeURIComponent(str);\n    }\n\n    /**\n     *\n     * @param selectorFiles FileList\n     */\n    reviveFromFileList(selectorFiles) {\n        let file = selectorFiles[0];\n        let reader = new FileReader();\n        reader.onload = function (e) {\n            let comp = JSON.parse(e.target.result);\n            if (comp != null) {\n                let callbacks = this.stateCallbacks;\n                this.revive( comp );\n                this.dumpToLocalStorage();\n                this.stateCallbacks = callbacks;\n                this.update();\n            }\n        }.bind(this);\n        reader.readAsText(file);\n    }\n\n    /**\n     *\n     * @param data\n     * @returns {_Competition}\n     */\n    revive(data) {\n        this.reset();\n        this._duration = data._duration;\n        this.maxVol = data.maxVol;\n        data.competitors.forEach((comp) => {\n            let newComp = new Competitor();\n            newComp.revive(comp);\n            this.addCompetitor(newComp);\n        });\n        data.calibrationCompetitors.forEach((comp) => {\n            let newComp = new CalibrationCompetitor();\n            newComp.revive(comp);\n            this.addCalibrationCompetitor(newComp);\n        });\n        this.update();\n    }\n\n}\n\nconst Competition = new _Competition();\n\nexport default Competition\n","import React, {Component} from 'react';\nimport CompetitionTable from \"../components/CompetitionTable\";\nimport Competition from '../entities/Competition';\nimport CalibrationCompetitor from \"../entities/CalibrationCompetitor\";\nimport {connect} from \"react-redux\";\nimport {addCompetitor, setDuration, setMaxvol, updateAllRatings} from \"../actions\";\nimport {doesCompetitorNameAlreadyExists} from \"../utils/competitionUtils\";\n\n\nclass Admin extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            addCompetitorInput: '',\n            addCalibrationCompetitorInput: 'Calibration 1',\n            durationInput: props.duration ? props.duration / 1000 : 10,\n            maxVolInput: props.maxVol,\n        };\n\n        this.addCompetitor = this.addCompetitor.bind(this);\n        this.addCalibrationCompetitor = this.addCalibrationCompetitor.bind(this);\n//        this.changeSettings = this.changeSettings.bind(this);\n        this.handleChange = this.handleChange.bind(this);\n\n    }\n\n    keyboardFunction(event) {\n        if (event.keyCode === 71) {\n            this.setState(\n                {\n                    record: 'def'\n                }\n            )\n        }\n    }\n\n    componentDidMount() {\n        document.title = \"Admin | Applaus-O-Meter\";\n    }\n\n    componentDidUpdate(prevProps, prevState) {\n        Competition.dumpToLocalStorage();\n    }\n\n    addCompetitor(event) {\n        event.preventDefault();\n        let name = this.state.addCompetitorInput;\n        if (!(name === \"\") && !doesCompetitorNameAlreadyExists(name)) {\n            this.props.dispatch(addCompetitor(name));\n        }\n    }\n\n    addCalibrationCompetitor(event) {\n        event.preventDefault();\n        let name = this.state.addCalibrationCompetitorInput;\n        if (!this.state.competition.isCalibrationCompetitorNameAlreadyExists(name) && !(name === \"\")) {\n            let competition = this.state.competition;\n            competition.addCalibrationCompetitor(new CalibrationCompetitor(name));\n            this.setState({\n                competition: competition\n            });\n        }\n    }\n\n    // Deprecated\n    // changeSettings(event) {\n    //     event.preventDefault();\n    //     let competition = this.state.competition;\n    //     // competition.duration = this.state.durationInput * 1000;\n    //     competition.maxVol = parseFloat((this.state.maxVolInput).toString().replace(',', '.'));\n    //     this.setState({\n    //         competition: competition\n    //     });\n    // }\n\n    setDuration = () => {\n        this.props.dispatch(\n            setDuration(this.state.durationInput * 1000)\n        );\n    };\n\n    setMaxvol = () => {\n        this.props.dispatch(\n            setMaxvol(\n                parseFloat((this.state.maxVolInput).toString().replace(',', '.'))\n            )\n        );\n        this.props.dispatch(updateAllRatings());\n    };\n\n    handleChange(e) {\n        this.setState({[e.target.name]: e.target.value});\n    }\n\n\n    render() {\n        return (\n            <div className=\"container-fluid p-5\">\n\n                <header>\n                    <h2>Welcome to Applaus-O-Meter administration</h2>\n                    <p>To get started, add some competitors.</p>\n                </header>\n\n\n                <div id=\"settings\">\n                    <h3>Settings</h3>\n                    <form\n                        className=\"form-group\"\n                        onSubmit={e => {\n                            e.preventDefault()\n                        }}\n                    >\n                        <div className=\"row\">\n                            <div className=\"col-2\">\n                                <label\n                                    htmlFor=\"durationInput\">Duration in\n                                    seconds<br/>(currently {this.props.duration / 1000} s)</label>\n                            </div>\n                            <div className=\"col-8\">\n                                <input type=\"text\" className=\"form-control w-100\"\n                                       name=\"durationInput\" value={this.state.durationInput}\n                                       placeholder=\"duration\"\n                                       onChange={this.handleChange}/>\n                            </div>\n                            <div className=\"col-2\">\n                                <input type=\"button\" className=\"form-control btn btn-success\"\n                                       value=\"Set!\" onClick={this.setDuration}/>\n                            </div>\n                        </div>\n                        <div className=\"row\">\n                            <div className=\"col-2\">\n                                <label\n                                    htmlFor=\"maxVolInput\">Max volume for rating, in range\n                                    [0;1]<br/>(currently: {this.props.maxVol})</label>\n                            </div>\n                            <div className=\"col-8\">\n                                <input type=\"text\" className=\"form-control w-100\"\n                                       name=\"maxVolInput\" value={this.state.maxVolInput}\n                                       onChange={this.handleChange}/>\n                            </div>\n                            <div className=\"col-2\">\n                                <input type=\"button\" className=\"form-control btn btn-success\"\n                                       value=\"Set!\" onClick={this.setMaxvol}/>\n                            </div>\n                        </div>\n                    </form>\n                </div>\n\n\n                <div id=\"competitors\" className=\"border border-secondary p-2 bg-primary rounded\">\n                    <h3>Competitors</h3>\n                    <form\n                        className=\"row form-group\"\n                        onSubmit={e => {\n                            e.preventDefault()\n                        }}\n                    >\n                        <div className=\"col-10\">\n                            <input type=\"text\" className=\"form-control w-100\"\n                                   name=\"addCompetitorInput\" value={this.state.addCompetitorInput}\n                                   placeholder=\"Competitor name\"\n                                   onChange={this.handleChange}/>\n                        </div>\n                        <div className=\"col-2\">\n                            <input type=\"button\" className=\"form-control btn btn-success\"\n                                   value=\"Add!\" onClick={this.addCompetitor}/>\n                        </div>\n                    </form>\n\n                    <div>\n                        <CompetitionTable competition={this.state.competition}/>\n                    </div>\n                </div>\n\n                {/*<div id=\"calibration\" className=\"my-4\">*/}\n                {/*    <h3>Calibration</h3>*/}\n                {/*    <form*/}\n                {/*        className=\"row form-group\"*/}\n                {/*        onSubmit={e => {*/}\n                {/*            e.preventDefault()*/}\n                {/*        }}*/}\n                {/*    >*/}\n                {/*        <div className=\"col-10\">*/}\n                {/*            <input type=\"text\" className=\"form-control w-100\"*/}\n                {/*                   name=\"addCalibrationCompetitorInput\"*/}\n                {/*                   value={this.state.addCalibrationCompetitorInput}*/}\n                {/*                   placeholder=\"Competitor name\"*/}\n                {/*                   onChange={this.handleChange}/>*/}\n                {/*        </div>*/}\n                {/*        <div className=\"col-2\">*/}\n                {/*            <input type=\"submit\" className=\"form-control btn btn-success\"*/}\n                {/*                   value=\"Add!\"/>*/}\n                {/*        </div>*/}\n                {/*    </form>*/}\n                {/*    <div>*/}\n                {/*        <CalibrationTable competition={this.state.competition}/>*/}\n                {/*    </div>*/}\n                {/*</div>*/}\n\n                <div>\n                    {/*<CompetitionJsonExportBtn competition={this.state.competition}/>*/}\n                    {/*<CompetitionJsonImportBtn competition={this.state.competition}/>*/}\n                </div>\n\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = state => ({\n    duration: state.administration.duration,\n    maxVol: state.administration.maxVol\n});\n\nexport default connect(mapStateToProps)(Admin)\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport RecordingDot from \"./RecordingDot\";\nimport {Wobble} from \"react-motions\";\nimport {connect} from \"react-redux\";\nimport {getLeader} from \"../utils/competitionUtils\";\n\nfunction CompetitorCard(props) {\n    console.log(\"competitor: \" + props.competitorKey);\n    console.log(\"competitors: \");\n    console.log(props.competitors);\n    const competitor = props.competitors[props.competitorKey];\n\n    let competitorNameClass = \"text-primary\";\n    let cardBgClass = \"bg-info\";\n    let ratingClass = \"text-secondary\";\n    if (getLeader() === props.competitorKey) {\n        cardBgClass = \"bg-success\";\n        competitorNameClass = \"text-secondary\";\n        ratingClass = \"text-secondary\";\n    }\n    let bounce = false;\n    if (competitor.stoppedRecording > (Math.floor(Date.now()) - 1 * 1000)) {\n        bounce = true;\n    }\n    let card =\n        <div className={\"card text-white text-center \" + cardBgClass}>\n            <div className=\"card-body\">\n                <div>\n                    <RecordingDot isActive={props.competitorKey === props.activeCompetitor}/>\n                </div>\n                <h2 className={\"card-title \" + competitorNameClass}>{competitor.name}</h2>\n                <div className=\"card-text\">\n                    <p>\n                        <span className=\"timeLeftText\">Verbleibende Zeit:</span>\n                        <br/>\n                        {parseFloat(((competitor.timeLeft !== null) ? competitor.timeLeft : props.duration) / 1000).toFixed(1)} Sekunden\n                    </p>\n                    <p className={\"btn btn-primary ratingText \" + ratingClass}>\n                        Wertung:&nbsp;\n                        <span className=\"text-white\">\n                            {\n                                props.ratings && props.ratings.hasOwnProperty(props.competitorKey)\n                                    ? parseFloat(props.ratings[props.competitorKey] * 10).toFixed(2)\n                                    : \"\"\n                            }\n                        </span>\n                    </p>\n                </div>\n            </div>\n        </div>;\n    if (competitor.isVisible) {\n        if (bounce) {\n            return (\n                <div className=\"col-3\" key={props.competitorKey}>\n                    <Wobble>\n                        {card}\n                    </Wobble>\n                </div>\n            )\n        } else {\n            return (\n                <div className=\"col-3\" key={props.competitorKey}>\n                    {card}\n                </div>\n            )\n        }\n    } else {\n        return <React.Fragment/>\n    }\n}\n\nconst mapStateToProps = state => ({\n    competitors: state.voting.competitors.byId,\n    ratings: state.voting.ratings,\n    activeCompetitor: state.voting.activeCompetitor,\n    duration: state.administration.duration\n});\n\nexport default connect(mapStateToProps)(CompetitorCard)\n","import React from 'react';\nimport {connect} from \"react-redux\";\nimport CompetitorCard from \"./CompetitorCard\";\n\n\nfunction CompetitionCards(props) {\n    return (\n        <div id=\"competitionCardContainer\" className=\"container-fluid px-5\">\n            <div className=\"row justify-content-center\">\n                {props.competitorKeys.map(\n                    competitorKey => <CompetitorCard key={competitorKey} competitorKey={competitorKey}/>\n                )}\n            </div>\n        </div>\n    )\n}\n\nconst mapStateToProps = state => ({\n    competitorKeys: state.voting.competitors.allIds,\n});\n\nexport default connect(mapStateToProps)(CompetitionCards)\n\n\n","import React, {Component} from 'react';\nimport RecordingDot from \"./RecordingDot\";\n\n\nfunction CalibrationCard(props) {\n    const competitor = props.competitor;\n    let cardBgClass = \"bg-info\";\n    if( props.competition.getLeader() === competitor ) {\n        cardBgClass = \"bg-success\";\n    }\n    return (\n        <div className=\"col-3\" key={competitor.name}>\n            <div className={\"card text-white text-center \" + cardBgClass}>\n                <div className=\"card-body\">\n                    <div>\n                        <RecordingDot isActive={competitor.isActive}/>\n                    </div>\n                    <h2 className=\"card-title text-primary\">{competitor.name}</h2>\n                    <div className=\"card-text\">\n                        <p className=\"h2\">Verbleibende Zeit:<br/>{parseFloat(competitor.timeLeft / 1000).toFixed(1)} Sekunden</p>\n                        <p className=\"h2\">Maximum: {parseFloat(competitor.getMax()).toFixed(2)}</p>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n}\n\nclass CalibrationCards extends Component {\n    render() {\n        return (\n            <div id=\"competitionCardContainer\" className=\"container-fluid\">\n                <div className=\"row justify-content-center\">\n                    <h3 className=\"bg-danger text-white text-center w-100 p-2\">CALIBRATION</h3>\n                    {this.props.competition.calibrationCompetitors.map(\n                        competitor => <CalibrationCard competition={this.props.competition} competitor={competitor} />\n                    )}\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default CalibrationCards\n\n\n","import React from \"react\";\nimport {SvgLoader, SvgProxy} from 'react-svgmt';\nimport castle from '../assets/castle.svg';\nimport useWindowSize from 'react-use/lib/useWindowSize'\nimport Confetti from 'react-confetti'\n\nfunction Castlemeter(props) {\n    const {width, height} = useWindowSize();\n    let isActive = props.isActive;\n    let rotation = - parseFloat(props.rating) * 90 - 45;\n\n    return (\n        <div className=\"d-flex flex-column-reverse p-4\">\n            {/*https://www.npmjs.com/package/react-confetti*/}\n            <Confetti\n                // run={isActive}\n                numberOfPieces={isActive ? undefined : 5}\n                width={width}\n                height={height}\n                gravity={isActive ? props.rating : 0.01}\n                wind={props.rating * 0.5}\n                recycle={true}\n                canvasRef={undefined}\n            />\n            <SvgLoader path={castle} height={400} width={2000}>\n                <SvgProxy selector=\"#rotmeter\"\n                          transform={\"rotate(\" + rotation + \" 565.9 124)\"}/>\n            </SvgLoader>\n        </div>\n    );\n}\n\nexport default Castlemeter;\n","import React, {Component} from \"react\";\nimport CompetitionCards from \"../components/CompetitionCards\";\nimport CalibrationCards from \"../components/CalibrationCards\";\nimport '../styles/frontend.css';\nimport {connect} from \"react-redux\";\nimport Castlemeter from \"../meters/Castlemeter\";\n\nclass View extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            isCalibrating: false,\n            rating: 0.0\n        };\n    }\n\n    componentDidMount() {\n        document.title = \"View | Applaus-O-Meter\";\n    }\n\n    render() {\n        let rating = 0;\n        let isActive = false;\n        const activeCompetitor = this.props.activeCompetitor;\n        if (activeCompetitor) {\n            isActive = true;\n            rating = this.props.ratings[activeCompetitor];\n        }\n        return (\n            <div id=\"frontend\" className=\"container-fluid py-2 rounded-0\">\n                <div id=\"graphic\" className=\"d-flex justify-content-center\">\n                    <Castlemeter isActive={isActive} rating={rating}/>\n                </div>\n                <div id=\"information\">\n                    {\n                        this.state.isCalibrating ?\n                            <CalibrationCards/> :\n                            <CompetitionCards/>\n                    }\n                </div>\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = state => ({\n    activeCompetitor: state.voting.activeCompetitor,\n    ratings: state.voting.ratings,\n});\n\nexport default connect(mapStateToProps)(View)\n","import React from \"react\";\nimport {connect} from \"react-redux\";\n\n// import logo from './fishtival_logo_yellow_white.svg';\n\nfunction Heading(props) {\n    return(\n        <div className=\"container-fluid pt-2\">\n            <h2 className=\"text-center text-warning\">Applaus-O-Meter</h2>\n            <h1 id=\"mainHeading\" className=\"text-center text-white py-1\">{props.title}</h1>\n            {/*<h1 className=\"text-center text-white bg-primary rounded p-1\">*/}\n                {/*<img src={logo} height=\"75\"/>*/}\n            {/*</h1>*/}\n        </div>\n    )\n}\n\nconst mapStateToProps = state => ({\n    title: state.administration.title\n});\n\nexport default connect(mapStateToProps)(Heading)\n","import React from 'react';\nimport {connect} from \"react-redux\";\n\n\nfunction Footer(props) {\n    return(\n        <footer className=\"container-fluid py-1 px-5 text-right\">\n            Applaus-O-Meter | {props.title} | mail@yorickreum.de\n        </footer>\n    );\n}\n\nconst mapStateToProps = state => ({\n    title: state.administration.title\n});\n\nexport default connect(mapStateToProps)(Footer)\n","import React, {Component} from 'react';\nimport ReactDOM from 'react-dom';\nimport {PersistGate} from 'redux-persist/integration/react'\nimport {HashRouter, Link, Route, Switch} from 'react-router-dom';\nimport Admin from './screens/Admin';\nimport registerServiceWorker from './registerServiceWorker';\nimport './styles/index.css'\nimport View from \"./screens/View\";\nimport Heading from \"./components/Heading\";\nimport Footer from \"./components/Footer\"\nimport {Provider} from \"react-redux\";\nimport {persistor, store} from \"./store\";\n\nclass Areas extends Component {\n\n    componentDidMount() {\n        document.title = \"Applaus-O-Meter\";\n    }\n\n    render() {\n        return (\n            <React.Fragment>\n                <div className=\"container\">\n                    <div className=\"row justify-content-center\">\n                        <div className=\"col-4\">\n                            <div className=\"card h-100 text-white text-center bg-warning\">\n                                <div className=\"card-body py-5\">\n                                    <h2 className=\"card-title text-primary pb-3\">Administration</h2>\n                                    <div className=\"card-text\">\n                                        <ul className=\"text-left\">\n                                            <li>Teilnehmner anlegen und verwalten</li>\n                                            <li>Abstimmungen starten</li>\n                                        </ul>\n                                        <Link to=\"/admin\" className=\"btn btn-primary\">Hier entlang &#8680;</Link>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <div className=\"col-4\">\n                            <div className=\"card h-100 text-white text-center bg-warning\">\n                                <div className=\"card-body py-5\">\n                                    <h2 className=\"card-title text-primary pb-3\">Abstimmung</h2>\n                                    <div className=\"card-text\">\n                                        <p>\n                                            Zum Beispiel in neuem Fenster ffnen und auf Beamer zeigen.\n                                        </p>\n                                        <Link to=\"/view\" className=\"btn btn-primary\">Hier entlang &#8680;</Link>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </React.Fragment>\n        )\n    }\n}\n\nReactDOM.render(\n    <Provider store={store}>\n        <PersistGate loading={null} persistor={persistor}>\n            <Heading/>\n            <HashRouter>\n                <Switch>\n                    <Route exact path=\"/\" component={Areas}/>\n                    <Route path=\"/admin\" component={Admin}/>\n                    <Route path=\"/view\" component={View}/>\n                </Switch>\n            </HashRouter>\n            <Footer/>\n        </PersistGate>\n    </Provider>,\n    document.getElementById('root')\n);\n\nregisterServiceWorker();\n"],"sourceRoot":""}